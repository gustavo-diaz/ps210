<!DOCTYPE html>
<html lang="en"><head>
<script src="week7_files/libs/clipboard/clipboard.min.js"></script>
<script src="week7_files/libs/quarto-html/tabby.min.js"></script>
<script src="week7_files/libs/quarto-html/popper.min.js"></script>
<script src="week7_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="week7_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week7_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="week7_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="week7_files/libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="week7_files/libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <title>week7</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="week7_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="week7_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="week7_files/libs/revealjs/dist/theme/quarto-9399a9bff37a5cb4b5afedada541d840.css">
  <link href="week7_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="week7_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="week7_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="week7_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="week7_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="week7_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="quasi-experiments" class="slide level2 center" style="text-align: center">
<h2>Quasi-Experiments</h2>
<h3 id="poli-sci-210">POLI SCI 210</h3>
<p>Introduction to Empirical Methods in Political Science</p>
</section>
<section id="so-far" class="slide level2">
<h2>So far</h2>
<ul>
<li><p><strong>Two weeks ago:</strong> Experiments as a framework to think about causal inference (potential outcomes)</p></li>
<li><p><strong>Last week:</strong> Regression as a flexible method to estimate conditional means/slopes</p></li>
</ul>
<div class="fragment">
<ul>
<li><strong>This week:</strong></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExOXk0Z2NwMzgzb2dpaWdldG14OGRmaXo3cHllOXJubXByNG1iaW91YSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/QqkA9W8xEjKPC/giphy.gif" class="quarto-figure quarto-figure-center" style="width:30.0%"></p>
</figure>
</div>
</div>
</section>
<section id="strategies-for-causal-inference" class="slide level2">
<h2>Strategies for causal inference</h2>
<ul>
<li class="fragment"><p><strong>Strategy 1:</strong> Random assignment</p></li>
<li class="fragment"><p><strong>Strategy 2:</strong> Ignorability assumption (conditional independence)</p></li>
</ul>
<div class="fragment">
<p>Ignorability is hard to justify:</p>
<ol type="1">
<li class="fragment">Need to account for all relevant confounding variables</li>
<li class="fragment">Should not include more than 2-3 controls in regression</li>
</ol>
</div>
</section>
<section id="roadmap" class="slide level2">
<h2>Roadmap</h2>
<p><strong>Quasi-experiments</strong> as research designs for <em>credible</em> causal inference in observational studies</p>
<div class="fragment">
<p><strong>Tuesday:</strong> Ignorability satisfied by design (regression discontinuity)</p>
<p><a href="#/thu"><strong>Thursday:</strong></a> Replace ignorability with a more plausible assumption (difference-in-differences)</p>
</div>
</section>
<section id="quasi-experiments-1" class="slide level2">
<h2>Quasi-experiments</h2>
<ul>
<li class="fragment"><p><em>Observational studies</em></p></li>
<li class="fragment"><p>Conditions (treatment, control) assigned in a manner that is <strong>sufficiently independent</strong> from potential outcomes</p></li>
<li class="fragment"><p>Enough to satisfly <em>ignorability</em> or <em>conditional independence</em></p></li>
<li class="fragment"><p><span class="math inline">\(\neq\)</span> <strong>Natural experiments</strong> (no random assignment)</p></li>
<li class="fragment"><p>We can <em>think</em> of them as experiments but they <strong>are not</strong></p></li>
</ul>
</section>
<section id="regression-discontinuity-design-rdd" class="slide level2">
<h2>Regression discontinuity design (RDD)</h2>
<p><strong>Ingredients</strong></p>
<ul>
<li class="fragment"><p><span class="math inline">\(Y\)</span>: Outcome</p></li>
<li class="fragment"><p><span class="math inline">\(X\)</span>: <strong>Score</strong> or <strong>running variable</strong> (numerical continuous)</p></li>
<li class="fragment"><p><span class="math inline">\(c\)</span>: <strong>Cutoff</strong> or <strong>threshold</strong></p></li>
<li class="fragment"><p><span class="math inline">\(T\)</span>: <strong>Treatment</strong> indicator (1, 0)</p></li>
</ul>
<div class="fragment">
<p><strong>Potential outcomes</strong></p>
<p><span class="math display">\[
Y = (1 - T) Y(0) + T Y(1) = \begin{cases}
Y(0) &amp; \text{if } X &lt; c\\
Y(1) &amp; \text{if } X \geq c
\end{cases}
\]</span></p>
</div>
</section>
<section id="sharp-rdd" class="slide level2">
<h2>Sharp RDD</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/rd_assign.png" class="quarto-figure quarto-figure-center" style="width:59.0%"></p>
</figure>
</div>

<aside><div>
<p>Called <em>sharp</em> because treatment assignment is <em>deterministic</em> at the cutoff</p>
</div></aside></section>
<section id="interpretation-two-approaches" class="slide level2">
<h2>Interpretation: Two approaches</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_assign.png"></p>
</div><div class="column" style="width:40%;">
<ol type="1">
<li><p>Local randomization</p></li>
<li><p>Continuity-based</p></li>
</ol>
</div></div>
</section>
<section id="local-randomization-approach" class="slide level2">
<h2>Local randomization approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_rand.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment"><p>Potential outcomes are not random because they depend on the <em>score</em></p></li>
<li class="fragment"><p>But around the <em>cutoff</em>, treatment assignment is <strong>as-if random</strong></p></li>
</ul>
</div></div>
<div class="fragment">
<p>We can pretend we have an experiment within a <strong>bandwidth</strong> around the <em>cutoff</em></p>
</div>
</section>
<section id="example" class="slide level2 smaller">
<h2>Example</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/hoekstra_1.png" class="quarto-figure quarto-figure-center" style="width:65.0%"></p>
</figure>
</div>

<aside><div>
<p><strong>Source:</strong> Hoekstra, Mark. 2009. <a href="https://doi.org/10.1162/rest.91.4.717">“The Effect of Attending the Flagship State University on Earnings: A Discontinuity-Based Approach.”</a> <em>The Review of Economics and Statistics</em> 91 (4): 717-724</p>
</div></aside></section>
<section id="local-randomization-approach-1" class="slide level2">
<h2>Local randomization approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_rand.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment"><p>Bandwidth <span class="math inline">\(\mathcal{W} = [c−w,c+w]\)</span></p></li>
<li class="fragment"><p>Treatment <strong>as-if</strong> random within <span class="math inline">\(\mathcal{W}\)</span></p></li>
<li class="fragment"><p>ATE <em>identified</em> within <span class="math inline">\(\mathcal{W}\)</span></p></li>
</ul>
</div></div>
</section>
<section id="local-randomization-approach-2" class="slide level2">
<h2>Local randomization approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_rand.png"></p>
</div><div class="column" style="width:40%;">
<p><strong>Requirements</strong></p>
<ol type="1">
<li class="fragment"><p>Known probability distribution of scores within <span class="math inline">\(\mathcal{W}\)</span> (<span class="math inline">\(\equiv\)</span> random assignment)</p></li>
<li class="fragment"><p>Potential outcomes <strong>not affected by scores</strong> within <span class="math inline">\(\mathcal{W}\)</span></p></li>
</ol>
</div></div>
</section>
<section id="local-randomization-approach-3" class="slide level2">
<h2>Local randomization approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_rand.png"></p>
</div><div class="column" style="width:40%;">
<p><strong>Estimation</strong></p>
<ul>
<li class="fragment">Difference in means within <span class="math inline">\(\mathcal{W}\)</span></li>
</ul>
<p><strong>Inference</strong></p>
<ol type="1">
<li class="fragment"><p>CLT approximation (needs a <em>super-population</em>)</p></li>
<li class="fragment"><p>Simulation (<em>randomization inference</em>)</p></li>
</ol>
</div></div>
</section>
<section id="challenge-choosing-a-bandwidth" class="slide level2">
<h2>Challenge: choosing a bandwidth</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/rdd_bw.png" class="quarto-figure quarto-figure-center" style="width:83.0%"></p>
</figure>
</div>

<aside><div>
<p>A narrow bandwidth has low bias but high variance. A wider bandwidth has lower variance but more bias. Narrow makes more sense but may yield wide confidence intervals.</p>
</div></aside></section>
<section id="continuity-based-approach" class="slide level2">
<h2>Continuity-based approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_cont.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment"><p>Treatment assignment <strong>deterministic</strong> at cutoff</p></li>
<li class="fragment"><p>ATE <em>identified</em> <strong>exactly</strong> at <em>cutoff</em></p></li>
<li class="fragment"><p><span class="math inline">\(\tau_{SRD} \equiv E[Y_i(1) - Y_i(0) | X_i = c]\)</span></p></li>
<li class="fragment"><p>But it does not exist!</p></li>
</ul>
</div></div>
</section>
<section id="example-evanston-school-district" class="slide level2">
<h2>Example: Evanston school district</h2>
<p align="center"><iframe src="https://www.google.com/maps/d/embed?mid=1mvqxAi6H-pWrBpdD5QwbeWJKPYCl8p9l&amp;hl=en&amp;ehbc=2E312F" width="900" height="500"></iframe></p>
</section>
<section id="continuity-based-approach-1" class="slide level2">
<h2>Continuity-based approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_cont.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li><p>ATE is <em>identified</em> but <em>nonexistent</em> at cutoff</p></li>
<li><p>Still, we can approximate gap</p></li>
</ul>
</div></div>
</section>
<section id="continuity-based-approach-2" class="slide level2">
<h2>Continuity-based approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_cont.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li><p>ATE is <em>identified</em> but <em>nonexistent</em> at cutoff</p></li>
<li><p>Still, we can approximate gap</p></li>
</ul>
<p><span class="math display">\[
\lim_{x \downarrow c} E[Y | X = x] -
\lim_{x \uparrow c} E[Y | X = x]
\]</span></p>
</div></div>
</section>
<section id="continuity-based-approach-3" class="slide level2">
<h2>Continuity-based approach</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="fig/rd_cont.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li><p>ATE is <em>identified</em> but <em>nonexistent</em> at cutoff</p></li>
<li><p>Still, we can approximate gap</p></li>
</ul>
<p><span class="math display">\[
\lim_{x \downarrow c} E[Y | X = x] -
\lim_{x \uparrow c} E[Y | X = x]
\]</span></p>
<ul>
<li>This becomes a <strong>line-drawing</strong> problem</li>
</ul>
</div></div>
</section>
<section id="local-polynomial-point-estimation" class="slide level2">
<h2>Local polynomial point estimation</h2>
<p><strong>Steps</strong></p>
<ol type="1">
<li><p>Choose polynomial <span class="math inline">\(p\)</span></p></li>
<li><p>Choose kernel function <span class="math inline">\(K(\cdot)\)</span></p></li>
<li><p>Choose bandwidth <span class="math inline">\(h\)</span></p></li>
<li><p>Fit <span class="math inline">\(\widehat \mu_+\)</span> and <span class="math inline">\(\widehat \mu_-\)</span> via <em>weighted least-squares</em></p></li>
<li><p>Estimate: <span class="math inline">\(\widehat{ATE} = \widehat \mu_+ - \widehat \mu_-\)</span></p></li>
<li><p>Inference: Correct for adaptive bandwidth selection</p></li>
</ol>

<aside><div>
<p>This a non-parametric procedure since most choices are automated</p>
</div></aside></section>
<section id="line-drawing-parametric" class="slide level2">
<h2>Line drawing: Parametric</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/rdd_poly.png" class="quarto-figure quarto-figure-center" style="width:90.0%"></p>
</figure>
</div>

<aside><div>
<p>Different functional forms change the size of the gap</p>
</div></aside></section>
<section id="line-drawing-nonparametric" class="slide level2">
<h2>Line drawing: Nonparametric</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/rdd_loess.png" class="quarto-figure quarto-figure-center" style="width:90.0%"></p>
</figure>
</div>

<aside><div>
<p>These lines are made by an algorithm that calculates the local average at many windows or bins of data</p>
</div></aside></section>
<section id="line-drawing-bandwidth" class="slide level2">
<h2>Line drawing: Bandwidth</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/rdd_bw2.png" class="quarto-figure quarto-figure-center" style="width:90.0%"></p>
</figure>
</div>

<aside><div>
<p>The size of the bandwidth determines the data you use to draw lines</p>
</div></aside></section>
<section id="practice" class="slide level2">
<h2>Practice</h2>

<img data-src="fig/meyersson.png" class="r-stretch quarto-figure-center"><p class="caption"><a href="https://doi.org/10.3982/ECTA9878" class="uri">https://doi.org/10.3982/ECTA9878</a></p></section>
<section id="ingredients" class="slide level2">
<h2>Ingredients</h2>
<ul>
<li><p><span class="math inline">\(Y\)</span>: Percentage of young women who had completed high school by 2000 (outcome)</p></li>
<li><p><span class="math inline">\(X`\)</span>: Islamic parties’ margin of victory in the 1994 mayoral election (score)</p></li>
<li><p><span class="math inline">\(c\)</span>: Implicit in score being centered at 0</p></li>
<li><p><span class="math inline">\(T\)</span>: Whether a mayor from an Islamic party was elected in the 1994 election (treatment)</p></li>
</ul>
</section>
<section id="visualize" class="slide level2">
<h2>Visualize</h2>

<img data-src="week7_files/figure-revealjs/unnamed-chunk-2-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="visualize-1" class="slide level2">
<h2>Visualize</h2>

<img data-src="week7_files/figure-revealjs/unnamed-chunk-3-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="bin-observations" class="slide level2">
<h2>Bin observations</h2>

<img data-src="week7_files/figure-revealjs/unnamed-chunk-5-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="models" class="slide level2">
<h2>Models</h2>
<p><strong>OLS baseline:</strong> <span class="math inline">\(\widehat Y = \beta_0 + \beta_1 T + \beta_2 X\)</span></p>
<div class="fragment">
<p><strong>Local randomization:</strong> 5% and 10% bandwidth</p>
</div>
<div class="fragment">
<p><strong>Continuity-based:</strong> Default automation</p>
</div>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_mi0ua1bhuuivxwxhlwot(i, j, css_id) {
          var table = document.getElementById("tinytable_mi0ua1bhuuivxwxhlwot");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_mi0ua1bhuuivxwxhlwot(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_mi0ua1bhuuivxwxhlwot");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '4', j: 0 }, { i: '4', j: 1 }, { i: '4', j: 2 }, { i: '4', j: 3 }, { i: '4', j: 4 },  ], css_id: 'tinytable_css_zf0z3shq12id72bnrxn1',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '2', j: 2 }, { i: '2', j: 3 }, { i: '3', j: 3 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 }, { i: '2', j: 4 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_k5sbww0o5wyrtrvfdugi',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_t1xtyvdc89yjdcrd21op',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_mi0ua1bhuuivxwxhlwot(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_zf0z3shq12id72bnrxn1, .table th.tinytable_css_zf0z3shq12id72bnrxn1 { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_k5sbww0o5wyrtrvfdugi, .table th.tinytable_css_k5sbww0o5wyrtrvfdugi { color: #00000000; }
      .table td.tinytable_css_t1xtyvdc89yjdcrd21op, .table th.tinytable_css_t1xtyvdc89yjdcrd21op { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_mi0ua1bhuuivxwxhlwot" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Approach</th>
                <th scope="col" data-row="0" data-col="1">bw</th>
                <th scope="col" data-row="0" data-col="2">estimate</th>
                <th scope="col" data-row="0" data-col="3">std.error</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Baseline</td>
                  <td data-row="1" data-col="1">NA</td>
                  <td data-row="1" data-col="2">-1.73</td>
                  <td data-row="1" data-col="3">0.747</td>
                  <td data-row="1" data-col="4">0.0204</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Local randomization</td>
                  <td data-row="2" data-col="1">5</td>
                  <td data-row="2" data-col="2">1.54</td>
                  <td data-row="2" data-col="3">1.179</td>
                  <td data-row="2" data-col="4">0.1924</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Local randomization</td>
                  <td data-row="3" data-col="1">10</td>
                  <td data-row="3" data-col="2">1.37</td>
                  <td data-row="3" data-col="3">0.836</td>
                  <td data-row="3" data-col="4">0.1013</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Continuity</td>
                  <td data-row="4" data-col="1">17.2</td>
                  <td data-row="4" data-col="2">3.02</td>
                  <td data-row="4" data-col="3">1.427</td>
                  <td data-row="4" data-col="4">0.0344</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-1" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_1cnf7fnei2fr1dkhu3o6(i, j, css_id) {
          var table = document.getElementById("tinytable_1cnf7fnei2fr1dkhu3o6");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_1cnf7fnei2fr1dkhu3o6(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_1cnf7fnei2fr1dkhu3o6");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '4', j: 0 }, { i: '4', j: 1 }, { i: '4', j: 2 }, { i: '4', j: 3 }, { i: '4', j: 4 },  ], css_id: 'tinytable_css_s4q3jmayup2hxwhjs1hl',}, 
          { positions: [ { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '2', j: 2 }, { i: '3', j: 2 }, { i: '2', j: 3 }, { i: '3', j: 3 }, { i: '2', j: 4 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_2vnzqmq2d8vlj972fi0y',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_d70xdc6fr3qyu4dgxr8l',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_1cnf7fnei2fr1dkhu3o6(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_s4q3jmayup2hxwhjs1hl, .table th.tinytable_css_s4q3jmayup2hxwhjs1hl { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_2vnzqmq2d8vlj972fi0y, .table th.tinytable_css_2vnzqmq2d8vlj972fi0y { color: #00000000; }
      .table td.tinytable_css_d70xdc6fr3qyu4dgxr8l, .table th.tinytable_css_d70xdc6fr3qyu4dgxr8l { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_1cnf7fnei2fr1dkhu3o6" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Approach</th>
                <th scope="col" data-row="0" data-col="1">bw</th>
                <th scope="col" data-row="0" data-col="2">estimate</th>
                <th scope="col" data-row="0" data-col="3">std.error</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Baseline</td>
                  <td data-row="1" data-col="1">NA</td>
                  <td data-row="1" data-col="2">-1.73</td>
                  <td data-row="1" data-col="3">0.747</td>
                  <td data-row="1" data-col="4">0.0204</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Local randomization</td>
                  <td data-row="2" data-col="1">5</td>
                  <td data-row="2" data-col="2">1.54</td>
                  <td data-row="2" data-col="3">1.179</td>
                  <td data-row="2" data-col="4">0.1924</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Local randomization</td>
                  <td data-row="3" data-col="1">10</td>
                  <td data-row="3" data-col="2">1.37</td>
                  <td data-row="3" data-col="3">0.836</td>
                  <td data-row="3" data-col="4">0.1013</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Continuity</td>
                  <td data-row="4" data-col="1">17.2</td>
                  <td data-row="4" data-col="2">3.02</td>
                  <td data-row="4" data-col="3">1.427</td>
                  <td data-row="4" data-col="4">0.0344</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-2" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_y09akvoqzab3v3odyu0n(i, j, css_id) {
          var table = document.getElementById("tinytable_y09akvoqzab3v3odyu0n");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_y09akvoqzab3v3odyu0n(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_y09akvoqzab3v3odyu0n");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '4', j: 0 }, { i: '4', j: 3 }, { i: '4', j: 2 }, { i: '4', j: 1 }, { i: '4', j: 4 },  ], css_id: 'tinytable_css_1gwx3i2moy460waiuf4h',}, 
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 3 }, { i: '3', j: 2 }, { i: '3', j: 1 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_kmfvwan0xi7iw61eh4mj',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 3 }, { i: '0', j: 2 }, { i: '0', j: 1 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_qca0uha9ctroyyzk1cqi',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_y09akvoqzab3v3odyu0n(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_1gwx3i2moy460waiuf4h, .table th.tinytable_css_1gwx3i2moy460waiuf4h { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_kmfvwan0xi7iw61eh4mj, .table th.tinytable_css_kmfvwan0xi7iw61eh4mj { color: #00000000; }
      .table td.tinytable_css_qca0uha9ctroyyzk1cqi, .table th.tinytable_css_qca0uha9ctroyyzk1cqi { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_y09akvoqzab3v3odyu0n" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Approach</th>
                <th scope="col" data-row="0" data-col="1">bw</th>
                <th scope="col" data-row="0" data-col="2">estimate</th>
                <th scope="col" data-row="0" data-col="3">std.error</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Baseline</td>
                  <td data-row="1" data-col="1">NA</td>
                  <td data-row="1" data-col="2">-1.73</td>
                  <td data-row="1" data-col="3">0.747</td>
                  <td data-row="1" data-col="4">0.0204</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Local randomization</td>
                  <td data-row="2" data-col="1">5</td>
                  <td data-row="2" data-col="2">1.54</td>
                  <td data-row="2" data-col="3">1.179</td>
                  <td data-row="2" data-col="4">0.1924</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Local randomization</td>
                  <td data-row="3" data-col="1">10</td>
                  <td data-row="3" data-col="2">1.37</td>
                  <td data-row="3" data-col="3">0.836</td>
                  <td data-row="3" data-col="4">0.1013</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Continuity</td>
                  <td data-row="4" data-col="1">17.2</td>
                  <td data-row="4" data-col="2">3.02</td>
                  <td data-row="4" data-col="3">1.427</td>
                  <td data-row="4" data-col="4">0.0344</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-3" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_s0r77bq9iv7tb73b52re(i, j, css_id) {
          var table = document.getElementById("tinytable_s0r77bq9iv7tb73b52re");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_s0r77bq9iv7tb73b52re(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_s0r77bq9iv7tb73b52re");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '4', j: 0 }, { i: '4', j: 1 }, { i: '4', j: 2 }, { i: '4', j: 3 }, { i: '4', j: 4 },  ], css_id: 'tinytable_css_rnh5c05ywr4ehlnzwc2i',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_ayomitaz7azd8twf2ske',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_s0r77bq9iv7tb73b52re(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_rnh5c05ywr4ehlnzwc2i, .table th.tinytable_css_rnh5c05ywr4ehlnzwc2i { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_ayomitaz7azd8twf2ske, .table th.tinytable_css_ayomitaz7azd8twf2ske { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_s0r77bq9iv7tb73b52re" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Approach</th>
                <th scope="col" data-row="0" data-col="1">bw</th>
                <th scope="col" data-row="0" data-col="2">estimate</th>
                <th scope="col" data-row="0" data-col="3">std.error</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Baseline</td>
                  <td data-row="1" data-col="1">NA</td>
                  <td data-row="1" data-col="2">-1.73</td>
                  <td data-row="1" data-col="3">0.747</td>
                  <td data-row="1" data-col="4">0.0204</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Local randomization</td>
                  <td data-row="2" data-col="1">5</td>
                  <td data-row="2" data-col="2">1.54</td>
                  <td data-row="2" data-col="3">1.179</td>
                  <td data-row="2" data-col="4">0.1924</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Local randomization</td>
                  <td data-row="3" data-col="1">10</td>
                  <td data-row="3" data-col="2">1.37</td>
                  <td data-row="3" data-col="3">0.836</td>
                  <td data-row="3" data-col="4">0.1013</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Continuity</td>
                  <td data-row="4" data-col="1">17.2</td>
                  <td data-row="4" data-col="2">3.02</td>
                  <td data-row="4" data-col="3">1.427</td>
                  <td data-row="4" data-col="4">0.0344</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-4" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_90gpn05tmfjkinctxwp3(i, j, css_id) {
          var table = document.getElementById("tinytable_90gpn05tmfjkinctxwp3");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_90gpn05tmfjkinctxwp3(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_90gpn05tmfjkinctxwp3");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '4', j: 0 }, { i: '4', j: 1 }, { i: '4', j: 2 }, { i: '4', j: 3 }, { i: '4', j: 4 },  ], css_id: 'tinytable_css_bh2rbnbp9tgef0ckyd4n',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_htqvcijcgg3b8z5tswas',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_90gpn05tmfjkinctxwp3(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_bh2rbnbp9tgef0ckyd4n, .table th.tinytable_css_bh2rbnbp9tgef0ckyd4n { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_htqvcijcgg3b8z5tswas, .table th.tinytable_css_htqvcijcgg3b8z5tswas { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_90gpn05tmfjkinctxwp3" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Approach</th>
                <th scope="col" data-row="0" data-col="1">bw</th>
                <th scope="col" data-row="0" data-col="2">estimate</th>
                <th scope="col" data-row="0" data-col="3">std.error</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Baseline</td>
                  <td data-row="1" data-col="1">NA</td>
                  <td data-row="1" data-col="2">-1.73</td>
                  <td data-row="1" data-col="3">0.747</td>
                  <td data-row="1" data-col="4">0.0204</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Local randomization</td>
                  <td data-row="2" data-col="1">5</td>
                  <td data-row="2" data-col="2">1.54</td>
                  <td data-row="2" data-col="3">1.179</td>
                  <td data-row="2" data-col="4">0.1924</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Local randomization</td>
                  <td data-row="3" data-col="1">10</td>
                  <td data-row="3" data-col="2">1.37</td>
                  <td data-row="3" data-col="3">0.836</td>
                  <td data-row="3" data-col="4">0.1013</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Continuity</td>
                  <td data-row="4" data-col="1">17.2</td>
                  <td data-row="4" data-col="2">3.02</td>
                  <td data-row="4" data-col="3">1.427</td>
                  <td data-row="4" data-col="4">0.0344</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<ul>
<li><p>RDD as a credible way to justify ignorability assumption</p></li>
<li><p>Because local randomization and continuity-based approach</p></li>
<li><p>Effects are <strong>causal</strong> but <strong>local</strong></p></li>
<li><p>Do they apply to other cases?</p></li>
<li><p>Do they exist beyond the discontinuity?</p></li>
</ul>
</section>
<section id="thu" class="slide level2 center" style="text-align: center">
<h2>Quasi-experiments</h2>
<h3 id="poli-sci-210-1">POLI SCI 210</h3>
<p>Introduction to Empirical Methods in Political Science</p>
</section>
<section id="last-time" class="slide level2">
<h2>Last time</h2>
<ul>
<li><p>RDD as an example of how to justify ignorability by design</p></li>
<li><p>But it is a very specific design!</p></li>
<li><p><strong>Today:</strong> Take advantage of before/after comparisons to circumvent ignorability assumption</p></li>
<li><p><strong>Difference-in-differences</strong> design</p></li>
</ul>
</section>
<section id="example-1" class="slide level2">
<h2>Example</h2>
<p align="center"><iframe width="900" height="500" src="https://www.youtube.com/embed/D2DzDDyKjR4?si=nFct16LCYQtLgSAe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe></p>


<aside><div>
<p><a href="https://youtu.be/D2DzDDyKjR4?si=5h2JXBOPXtPZ5bG0" class="uri">https://youtu.be/D2DzDDyKjR4?si=5h2JXBOPXtPZ5bG0</a></p>
</div></aside></section>
<section id="king-of-the-pump" class="slide level2">
<h2>King of the Pump</h2>
<div class="fragment">
<p><strong>How did John Snow prove that it was the water?</strong></p>
<ul>
<li class="fragment"><p>Before/after comparison (1849-1854)</p></li>
<li class="fragment"><p><strong>In between:</strong> Lambeth water company forced to move upstream (away from dirty water)</p></li>
</ul>
</div>
</section>
<section id="results-5" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_714r3z09eowilz2fgobz(i, j, css_id) {
          var table = document.getElementById("tinytable_714r3z09eowilz2fgobz");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_714r3z09eowilz2fgobz(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_714r3z09eowilz2fgobz");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '-1', j: 1 },  ], css_id: 'tinytable_css_jc0mqrhwit4jv3jujq1h',}, 
          { positions: [ { i: '2', j: 0 }, { i: '2', j: 1 }, { i: '2', j: 2 },  ], css_id: 'tinytable_css_1bhqbtkp8wsi98dlznin',}, 
          { positions: [ { i: '1', j: 0 }, { i: '1', j: 1 }, { i: '1', j: 2 },  ], css_id: 'tinytable_css_71f3gayvg4mepia0ajcw',}, 
          { positions: [ { i: '-1', j: 0 }, { i: '-1', j: 2 },  ], css_id: 'tinytable_css_k37jdak9e7uh59g5ddc6',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 },  ], css_id: 'tinytable_css_v21wcfmqajet8xoxtxvk',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_714r3z09eowilz2fgobz(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_jc0mqrhwit4jv3jujq1h, .table th.tinytable_css_jc0mqrhwit4jv3jujq1h { border-top: solid #d3d8dc 0.1em; text-align: center; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_1bhqbtkp8wsi98dlznin, .table th.tinytable_css_1bhqbtkp8wsi98dlznin { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_71f3gayvg4mepia0ajcw, .table th.tinytable_css_71f3gayvg4mepia0ajcw { color: #00000000; }
      .table td.tinytable_css_k37jdak9e7uh59g5ddc6, .table th.tinytable_css_k37jdak9e7uh59g5ddc6 { border-top: solid #d3d8dc 0.1em; text-align: center; }
      .table td.tinytable_css_v21wcfmqajet8xoxtxvk, .table th.tinytable_css_v21wcfmqajet8xoxtxvk { border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_714r3z09eowilz2fgobz" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
<tr>
<th scope="col" align="center" colspan="1" data-row="-1" data-col="0"> </th>
<th scope="col" align="center" colspan="2" data-row="-1" data-col="1">Cholera deaths per 10,000</th>
</tr>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Supplier</th>
                <th scope="col" data-row="0" data-col="1">1849</th>
                <th scope="col" data-row="0" data-col="2">1854</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Lambeth (dirty to clean)</td>
                  <td data-row="1" data-col="1">85</td>
                  <td data-row="1" data-col="2">19</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Others (dirty to dirty)</td>
                  <td data-row="2" data-col="1">135</td>
                  <td data-row="2" data-col="2">147</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>

<aside><div>
<p><strong>Adapted from:</strong> Coleman, Thomas. 2019. <a href="https://dx.doi.org/10.2139/ssrn.3262234">“Causality in the Time of Cholera: John Snow as a Prototype for Causal Inference.”</a></p>
</div></aside></section>
<section id="results-6" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_8uulvprjgli9nbhdql9i(i, j, css_id) {
          var table = document.getElementById("tinytable_8uulvprjgli9nbhdql9i");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_8uulvprjgli9nbhdql9i(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_8uulvprjgli9nbhdql9i");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '-1', j: 1 },  ], css_id: 'tinytable_css_tgbyhueiko4mfnonzoad',}, 
          { positions: [ { i: '2', j: 2 }, { i: '2', j: 1 }, { i: '2', j: 0 },  ], css_id: 'tinytable_css_7bd1hkhaucdyztlmo97u',}, 
          { positions: [ { i: '-1', j: 0 }, { i: '-1', j: 2 },  ], css_id: 'tinytable_css_ya6owg2vhomptzlbl54f',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 2 }, { i: '0', j: 1 },  ], css_id: 'tinytable_css_nj0h3bntctkaqlwbxukw',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_8uulvprjgli9nbhdql9i(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_tgbyhueiko4mfnonzoad, .table th.tinytable_css_tgbyhueiko4mfnonzoad { border-top: solid #d3d8dc 0.1em; text-align: center; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_7bd1hkhaucdyztlmo97u, .table th.tinytable_css_7bd1hkhaucdyztlmo97u { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_ya6owg2vhomptzlbl54f, .table th.tinytable_css_ya6owg2vhomptzlbl54f { border-top: solid #d3d8dc 0.1em; text-align: center; }
      .table td.tinytable_css_nj0h3bntctkaqlwbxukw, .table th.tinytable_css_nj0h3bntctkaqlwbxukw { border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_8uulvprjgli9nbhdql9i" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
<tr>
<th scope="col" align="center" colspan="1" data-row="-1" data-col="0"> </th>
<th scope="col" align="center" colspan="2" data-row="-1" data-col="1">Cholera deaths per 10,000</th>
</tr>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Supplier</th>
                <th scope="col" data-row="0" data-col="1">1849</th>
                <th scope="col" data-row="0" data-col="2">1854</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Lambeth (dirty to clean)</td>
                  <td data-row="1" data-col="1">85</td>
                  <td data-row="1" data-col="2">19</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Others (dirty to dirty)</td>
                  <td data-row="2" data-col="1">135</td>
                  <td data-row="2" data-col="2">147</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>

<aside><div>
<p><strong>Adapted from:</strong> Coleman, Thomas. 2019. <a href="https://dx.doi.org/10.2139/ssrn.3262234">“Causality in the Time of Cholera: John Snow as a Prototype for Causal Inference.”</a></p>
</div></aside></section>
<section id="results-7" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_kawo631taq7skri901ju(i, j, css_id) {
          var table = document.getElementById("tinytable_kawo631taq7skri901ju");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_kawo631taq7skri901ju(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_kawo631taq7skri901ju");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '-1', j: 1 },  ], css_id: 'tinytable_css_do16fobqp1bf7xdbd4qs',}, 
          { positions: [ { i: '2', j: 2 }, { i: '2', j: 1 }, { i: '2', j: 0 },  ], css_id: 'tinytable_css_rs0t93gxi02xvnd0jxbg',}, 
          { positions: [ { i: '-1', j: 0 }, { i: '-1', j: 2 },  ], css_id: 'tinytable_css_443663qfs41c73jb71go',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 2 }, { i: '0', j: 1 },  ], css_id: 'tinytable_css_w60l4py9lcdge3bdzguz',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_kawo631taq7skri901ju(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_do16fobqp1bf7xdbd4qs, .table th.tinytable_css_do16fobqp1bf7xdbd4qs { border-top: solid #d3d8dc 0.1em; text-align: center; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_rs0t93gxi02xvnd0jxbg, .table th.tinytable_css_rs0t93gxi02xvnd0jxbg { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_443663qfs41c73jb71go, .table th.tinytable_css_443663qfs41c73jb71go { border-top: solid #d3d8dc 0.1em; text-align: center; }
      .table td.tinytable_css_w60l4py9lcdge3bdzguz, .table th.tinytable_css_w60l4py9lcdge3bdzguz { border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_kawo631taq7skri901ju" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
<tr>
<th scope="col" align="center" colspan="1" data-row="-1" data-col="0"> </th>
<th scope="col" align="center" colspan="2" data-row="-1" data-col="1">Cholera deaths per 10,000</th>
</tr>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Supplier</th>
                <th scope="col" data-row="0" data-col="1">1849</th>
                <th scope="col" data-row="0" data-col="2">1854</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Lambeth (dirty to clean)</td>
                  <td data-row="1" data-col="1">85</td>
                  <td data-row="1" data-col="2">19</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Others (dirty to dirty)</td>
                  <td data-row="2" data-col="1">135</td>
                  <td data-row="2" data-col="2">147</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<div class="fragment">
<p>Moving away from the <i class="fa-solid fa-poo" aria-label="poo"></i> certainly helped!</p>

</div>
<aside><div>
<p><strong>Adapted from:</strong> Coleman, Thomas. 2019. <a href="https://dx.doi.org/10.2139/ssrn.3262234">“Causality in the Time of Cholera: John Snow as a Prototype for Causal Inference.”</a></p>
</div></aside></section>
<section id="another-example" class="slide level2">
<h2>Another example</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="fig/card_krueger.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>

<aside><div>
<p>Card, David and Alan B. Krueger (1994). <a href="https://www.jstor.org/stable/2118030">“Minimum Wages and Employment: A Case Study of the Fast-Food Industry in New Jersey and Pennsylvania.”</a> <em>American Economic Review</em> 84 (4): 772-793</p>
</div></aside></section>
<section class="slide level2">


<img data-src="fig/card_nobel.jpeg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="minimum-wage-and-employment" class="slide level2">
<h2>Minimum wage and employment</h2>
<ul>
<li class="fragment"><p><strong>Agreement:</strong> Increasing minimum wage reduces employment</p></li>
<li class="fragment"><p><strong>New Jersey 1992:</strong> $4.25 <span class="math inline">\(\rightarrow\)</span> $5.05</p></li>
<li class="fragment"><p><strong>Pennsylvania:</strong> Stay at $4.25</p></li>
<li class="fragment"><p>Look at <strong>full time employment</strong> (FTE) in <em>fast food restaurants</em></p></li>
<li class="fragment"><p>Compare February-November 1992</p></li>
</ul>
</section>
<section id="results-8" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_ca3a1xvxx9wtz6qwu8mq(i, j, css_id) {
          var table = document.getElementById("tinytable_ca3a1xvxx9wtz6qwu8mq");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_ca3a1xvxx9wtz6qwu8mq(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_ca3a1xvxx9wtz6qwu8mq");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '3', j: 3 },  ], css_id: 'tinytable_css_ptmjll9ezhkl8gda55gu',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '1', j: 3 }, { i: '2', j: 3 },  ], css_id: 'tinytable_css_0x8uqx8ixkxcwzsgav17',}, 
          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 },  ], css_id: 'tinytable_css_rdtztzq2tfg7yjn3919x',}, 
          { positions: [ { i: '3', j: 0 },  ], css_id: 'tinytable_css_phdwpmsyw5b8z7dk0d38',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_l8wkvr3651fwod3t3356',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_ca3a1xvxx9wtz6qwu8mq(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_ptmjll9ezhkl8gda55gu, .table th.tinytable_css_ptmjll9ezhkl8gda55gu { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_0x8uqx8ixkxcwzsgav17, .table th.tinytable_css_0x8uqx8ixkxcwzsgav17 { color: #00000000; }
      .table td.tinytable_css_rdtztzq2tfg7yjn3919x, .table th.tinytable_css_rdtztzq2tfg7yjn3919x { color: #00000000; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_phdwpmsyw5b8z7dk0d38, .table th.tinytable_css_phdwpmsyw5b8z7dk0d38 { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_l8wkvr3651fwod3t3356, .table th.tinytable_css_l8wkvr3651fwod3t3356 { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_ca3a1xvxx9wtz6qwu8mq" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Variable</th>
                <th scope="col" data-row="0" data-col="1">PA</th>
                <th scope="col" data-row="0" data-col="2">NJ</th>
                <th scope="col" data-row="0" data-col="3">NJ-PA</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">FTE before</td>
                  <td data-row="1" data-col="1">23.300</td>
                  <td data-row="1" data-col="2">20.44</td>
                  <td data-row="1" data-col="3">-2.89</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">FTE after</td>
                  <td data-row="2" data-col="1">21.147</td>
                  <td data-row="2" data-col="2">21.03</td>
                  <td data-row="2" data-col="3">-0.14</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Change</td>
                  <td data-row="3" data-col="1">-2.160</td>
                  <td data-row="3" data-col="2">0.59</td>
                  <td data-row="3" data-col="3">2.76</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-9" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_9wslou58sg7fmhm9dibz(i, j, css_id) {
          var table = document.getElementById("tinytable_9wslou58sg7fmhm9dibz");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_9wslou58sg7fmhm9dibz(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_9wslou58sg7fmhm9dibz");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 2 }, { i: '3', j: 3 },  ], css_id: 'tinytable_css_rd2rleapmjt7as35ejvm',}, 
          { positions: [ { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '1', j: 3 }, { i: '2', j: 3 },  ], css_id: 'tinytable_css_dddonkbqfsdrpk4c8x60',}, 
          { positions: [ { i: '0', j: 2 }, { i: '0', j: 3 },  ], css_id: 'tinytable_css_fi3qywrn01l4srv0gmmk',}, 
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 1 },  ], css_id: 'tinytable_css_qz6z875fs2comuimro7c',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 },  ], css_id: 'tinytable_css_0nzmnhdcqnroi69yhlmk',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_9wslou58sg7fmhm9dibz(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_rd2rleapmjt7as35ejvm, .table th.tinytable_css_rd2rleapmjt7as35ejvm { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_dddonkbqfsdrpk4c8x60, .table th.tinytable_css_dddonkbqfsdrpk4c8x60 { color: #00000000; }
      .table td.tinytable_css_fi3qywrn01l4srv0gmmk, .table th.tinytable_css_fi3qywrn01l4srv0gmmk { color: #00000000; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_qz6z875fs2comuimro7c, .table th.tinytable_css_qz6z875fs2comuimro7c { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_0nzmnhdcqnroi69yhlmk, .table th.tinytable_css_0nzmnhdcqnroi69yhlmk { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_9wslou58sg7fmhm9dibz" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Variable</th>
                <th scope="col" data-row="0" data-col="1">PA</th>
                <th scope="col" data-row="0" data-col="2">NJ</th>
                <th scope="col" data-row="0" data-col="3">NJ-PA</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">FTE before</td>
                  <td data-row="1" data-col="1">23.300</td>
                  <td data-row="1" data-col="2">20.44</td>
                  <td data-row="1" data-col="3">-2.89</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">FTE after</td>
                  <td data-row="2" data-col="1">21.147</td>
                  <td data-row="2" data-col="2">21.03</td>
                  <td data-row="2" data-col="3">-0.14</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Change</td>
                  <td data-row="3" data-col="1">-2.160</td>
                  <td data-row="3" data-col="2">0.59</td>
                  <td data-row="3" data-col="3">2.76</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-10" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_5xq9tsybpv9tv82gkr5n(i, j, css_id) {
          var table = document.getElementById("tinytable_5xq9tsybpv9tv82gkr5n");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_5xq9tsybpv9tv82gkr5n(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_5xq9tsybpv9tv82gkr5n");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 3 },  ], css_id: 'tinytable_css_a3hegt8skyh8kpfaf3hz',}, 
          { positions: [ { i: '1', j: 3 }, { i: '2', j: 3 },  ], css_id: 'tinytable_css_5r6hb8awxkns0u4jo086',}, 
          { positions: [ { i: '0', j: 3 },  ], css_id: 'tinytable_css_az2jj9853hg5yv53wbs5',}, 
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 1 }, { i: '3', j: 2 },  ], css_id: 'tinytable_css_c1bgoe5otwhyri5a4aoc',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 },  ], css_id: 'tinytable_css_2wgv1napq0p5x8oayo01',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_5xq9tsybpv9tv82gkr5n(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_a3hegt8skyh8kpfaf3hz, .table th.tinytable_css_a3hegt8skyh8kpfaf3hz { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_5r6hb8awxkns0u4jo086, .table th.tinytable_css_5r6hb8awxkns0u4jo086 { color: #00000000; }
      .table td.tinytable_css_az2jj9853hg5yv53wbs5, .table th.tinytable_css_az2jj9853hg5yv53wbs5 { color: #00000000; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_c1bgoe5otwhyri5a4aoc, .table th.tinytable_css_c1bgoe5otwhyri5a4aoc { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_2wgv1napq0p5x8oayo01, .table th.tinytable_css_2wgv1napq0p5x8oayo01 { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_5xq9tsybpv9tv82gkr5n" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Variable</th>
                <th scope="col" data-row="0" data-col="1">PA</th>
                <th scope="col" data-row="0" data-col="2">NJ</th>
                <th scope="col" data-row="0" data-col="3">NJ-PA</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">FTE before</td>
                  <td data-row="1" data-col="1">23.300</td>
                  <td data-row="1" data-col="2">20.44</td>
                  <td data-row="1" data-col="3">-2.89</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">FTE after</td>
                  <td data-row="2" data-col="1">21.147</td>
                  <td data-row="2" data-col="2">21.03</td>
                  <td data-row="2" data-col="3">-0.14</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Change</td>
                  <td data-row="3" data-col="1">-2.160</td>
                  <td data-row="3" data-col="2">0.59</td>
                  <td data-row="3" data-col="3">2.76</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-11" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_x5mlirjqhb2khzn8xxfc(i, j, css_id) {
          var table = document.getElementById("tinytable_x5mlirjqhb2khzn8xxfc");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_x5mlirjqhb2khzn8xxfc(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_x5mlirjqhb2khzn8xxfc");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '3', j: 3 },  ], css_id: 'tinytable_css_6xdkiu3a60r2kujak96e',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 },  ], css_id: 'tinytable_css_ct8cizs32v5x01c1jrqb',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_x5mlirjqhb2khzn8xxfc(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_6xdkiu3a60r2kujak96e, .table th.tinytable_css_6xdkiu3a60r2kujak96e { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_ct8cizs32v5x01c1jrqb, .table th.tinytable_css_ct8cizs32v5x01c1jrqb { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_x5mlirjqhb2khzn8xxfc" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Variable</th>
                <th scope="col" data-row="0" data-col="1">PA</th>
                <th scope="col" data-row="0" data-col="2">NJ</th>
                <th scope="col" data-row="0" data-col="3">NJ-PA</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">FTE before</td>
                  <td data-row="1" data-col="1">23.300</td>
                  <td data-row="1" data-col="2">20.44</td>
                  <td data-row="1" data-col="3">-2.89</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">FTE after</td>
                  <td data-row="2" data-col="1">21.147</td>
                  <td data-row="2" data-col="2">21.03</td>
                  <td data-row="2" data-col="3">-0.14</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Change</td>
                  <td data-row="3" data-col="1">-2.160</td>
                  <td data-row="3" data-col="2">0.59</td>
                  <td data-row="3" data-col="3">2.76</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<div class="fragment">
<p>Increasing minimum waged created <strong>more</strong> jobs in NJ!</p>
</div>
</section>
<section id="difference-in-differences-design" class="slide level2">
<h2>Difference-in-differences design</h2>
<ul>
<li class="fragment"><p>Time periods: <span class="math inline">\(t = \{1,2\}\)</span> (Before/after treatment)</p></li>
<li class="fragment"><p>Treatment: <span class="math inline">\(D_i = \{0,1\}\)</span></p></li>
<li class="fragment"><p>Potential outcomes: <span class="math inline">\(Y_{i,t}(0) = Y_{i,t}(0, 0)\)</span> and <span class="math inline">\(Y_{i,t}(1) = Y_{i,t}(0, 1)\)</span></p></li>
</ul>
<div class="fragment">
<p><strong>Switching equation</strong></p>
<p><span class="math display">\[
Y_{i,t} = D_i Y_{i,t}(1) + (1-D_i) Y_{i,t}(0)
\]</span></p>

</div>
<aside><div>
<p>aka DD, DiD, diff-in-diffs for short</p>
</div></aside></section>
<section id="target-quantity" class="slide level2">
<h2>Target quantity</h2>
<div class="fragment">
<p><strong>Average treated effect on the treated (ATT) in <span class="math inline">\(t=2\)</span></strong></p>
<p><span class="math display">\[
\tau_2 = E[Y_{i,2}(1) - Y_{i,2}(0) | D_i = 1]
\]</span></p>
<ul>
<li class="fragment"><p>Cannot observe directly</p></li>
<li class="fragment"><p>Cannot avoid <em>selection bias</em></p></li>
<li class="fragment"><p>But before/after setup allows for credible estimation</p></li>
</ul>
</div>
</section>
<section id="target-quantity-1" class="slide level2">
<h2>Target quantity</h2>

<img data-src="fig/dd.png" class="r-stretch"></section>
<section id="did-estimation" class="slide level2">
<h2>DID estimation</h2>

<img data-src="fig/dd.png" class="r-stretch"><p><span class="math display">\[
\widehat{ATT} =  [\text{Mean}(B) - \text{Mean}(A)] - [\text{Mean}(D) - \text{Mean}(C)]
\]</span></p>
</section>
<section id="did-estimation-1" class="slide level2">
<h2>DID estimation</h2>

<img data-src="fig/dd.png" class="r-stretch"><p><span class="math display">\[
\widehat{ATT} =  \underbrace{[\text{Mean}(B) - \text{Mean}(A)]}_\text{Difference} - \underbrace{[\text{Mean}(D) - \text{Mean}(C)]}_\text{Difference}
\]</span></p>
</section>
<section id="did-estimation-2" class="slide level2">
<h2>DID estimation</h2>

<img data-src="fig/dd.png" class="r-stretch"><p><span class="math display">\[
\widehat{ATT} =  \underbrace{\underbrace{[\text{Mean}(B) - \text{Mean}(A)]}_\text{Difference} - \underbrace{[\text{Mean}(D) - \text{Mean}(C)]}_\text{Difference}}_\text{Difference-in-differences}
\]</span></p>
</section>
<section id="rewrite-as-a-regression" class="slide level2">
<h2>Rewrite as a regression</h2>
<div class="fragment">
<p><strong>Two time periods</strong></p>
<p><span class="math display">\[
\begin{align}
Y = &amp; \beta_0 + \beta_1 \text{Treated} + \beta_2 \text{Post-treatment} + \\
&amp; {\color{purple}{\beta_3 \text{Treated} \times \text{Post-treatment}}}
\end{align}
\]</span></p>
<ul>
<li class="fragment"><p><span class="math inline">\(\beta_0\)</span>: Avg. control group, before treatment</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0 + \beta_1\)</span>: Avg. treatment group, before treatment</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0 + \beta_2\)</span>: Avg. control group, post-treatment</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0 + \beta_1 + \beta_2 + \beta_3\)</span>: Avg. treatment group, post-treatment</p></li>
</ul>
</div>
<div class="fragment">
<p><span class="math inline">\(\beta_3\)</span> gives the <strong>difference-in-differences</strong></p>
</div>
</section>
<section id="rewrite-as-a-regression-1" class="slide level2">
<h2>Rewrite as a regression</h2>
<p><strong>Multiple time periods</strong></p>
<div class="fragment">
<p><span class="math display">\[
Y = \alpha_i + \alpha_t + \color{purple}{\beta_1 \text{Treated}}
\]</span></p>
<ul>
<li class="fragment"><p><span class="math inline">\(\alpha_i\)</span>: Control for variation <strong>within units</strong></p></li>
<li class="fragment"><p><span class="math inline">\(\alpha_t\)</span>: Control for variation <strong>over time</strong></p></li>
<li class="fragment"><p><span class="math inline">\(\alpha_i\)</span> and <span class="math inline">\(\alpha_t\)</span> are called <strong>fixed-effects</strong></p></li>
</ul>
</div>
<div class="fragment">
<p>This is a <em>two-way fixed-effects</em> estimator (TWFE)</p>
</div>
</section>
<section id="example-with-multiple-periods" class="slide level2">
<h2>Example with multiple periods</h2>
<!-- https://github.com/gustavo-diaz/ps403/blob/main/labs/lab8.qmd -->

<img data-src="fig/kessler.png" style="width:70.0%" class="r-stretch quarto-figure-center"><p class="caption"><a href="https://www.nber.org/papers/w20378" class="uri">https://www.nber.org/papers/w20378</a></p></section>
<section class="slide level2">

<!-- Alabama is missing! -->

<img data-src="fig/kessler_wording.png" class="r-stretch"></section>
<section id="intervention" class="slide level2">
<h2>Intervention</h2>
<ul>
<li class="fragment"><p><strong>2011:</strong> California switches from <em>opt-in</em> <span class="math inline">\(\rightarrow\)</span> <em>active choice</em></p></li>
<li class="fragment"><p>Compare with states that <em>remain opt-in</em> (AZ, DC, MN, NH, TN, SC, SD, VA, WI)</p></li>
<li class="fragment"><p><strong>Outcome:</strong> Average sign-up rates per quarter per state</p></li>
</ul>
</section>
<section id="comparison-over-time" class="slide level2">
<h2>Comparison over time</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week7_files/figure-revealjs/unnamed-chunk-23-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>

<aside><div>
<p><strong>Opt-in states:</strong> AZ, DC, MN, NH, TN, SC, SD, VA, WI</p>
</div></aside></section>
<section id="models-1" class="slide level2">
<h2>Models</h2>
<div class="fragment">
<p><strong>Two-periods:</strong> <span class="math inline">\(\widehat{\texttt{rate}} = \beta_0 + \beta_1 \texttt{california} + \beta_2 \texttt{post} + \color{purple}{\beta_3 \texttt{california} \times \texttt{post}}\)</span></p>
</div>
<div class="fragment">
<p><strong>Two-wave fixed-effects:</strong> <span class="math inline">\(\widehat{\texttt{rate}} = \alpha_{\texttt{state}} + \alpha_{\texttt{quarter}} + \color{purple}{\beta_1 \texttt{treated}}\)</span></p>
</div>
</section>
<section id="models-2" class="slide level2">
<h2>Models</h2>
<p><strong>Two-periods:</strong> <span class="math inline">\(\widehat{\texttt{rate}} = \beta_0 + \beta_1 \texttt{california} + \beta_2 \texttt{post} + \color{purple}{\beta_3 \texttt{california} \times \texttt{post}}\)</span></p>
<p><strong>Two-wave fixed-effects:</strong> <span class="math inline">\(\widehat{\texttt{rate}} = \beta_0 + \color{purple}{ \beta_1 \texttt{california-post}} + \beta_2 \texttt{state} + \beta_3 \texttt{quarter}\)</span></p>
<div class="fragment">
<p>&nbsp;</p>
<p>Use <a href="https://doi.org/10.1093/qje/qjac038"><strong>clustered standard errors</strong></a> for statistical inference</p>
</div>
</section>
<section id="results-12" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_394mo5utd85t6n11k1hy(i, j, css_id) {
          var table = document.getElementById("tinytable_394mo5utd85t6n11k1hy");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_394mo5utd85t6n11k1hy(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_394mo5utd85t6n11k1hy");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '3', j: 3 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_8myd8lhxv7tvxa82rsl5',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '1', j: 3 }, { i: '2', j: 3 }, { i: '1', j: 4 }, { i: '2', j: 4 },  ], css_id: 'tinytable_css_643zdvcw5mr5jecbo4rv',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_k2l97weog9vxhyl4qxfh',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_394mo5utd85t6n11k1hy(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_8myd8lhxv7tvxa82rsl5, .table th.tinytable_css_8myd8lhxv7tvxa82rsl5 { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_643zdvcw5mr5jecbo4rv, .table th.tinytable_css_643zdvcw5mr5jecbo4rv { color: #00000000; }
      .table td.tinytable_css_k2l97weog9vxhyl4qxfh, .table th.tinytable_css_k2l97weog9vxhyl4qxfh { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_394mo5utd85t6n11k1hy" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Model</th>
                <th scope="col" data-row="0" data-col="1">estimate</th>
                <th scope="col" data-row="0" data-col="2">conf.low</th>
                <th scope="col" data-row="0" data-col="3">conf.high</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Two-periods (no clustering)</td>
                  <td data-row="1" data-col="1">-0.0225</td>
                  <td data-row="1" data-col="2">-0.2699</td>
                  <td data-row="1" data-col="3">0.225</td>
                  <td data-row="1" data-col="4">0.857941</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Two-periods (clustered)</td>
                  <td data-row="2" data-col="1">-0.0225</td>
                  <td data-row="2" data-col="2">-0.0349</td>
                  <td data-row="2" data-col="3">-0.0101</td>
                  <td data-row="2" data-col="4">0.000986</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Two-way FE</td>
                  <td data-row="3" data-col="1">-0.0225</td>
                  <td data-row="3" data-col="2">-0.0349</td>
                  <td data-row="3" data-col="3">-0.0101</td>
                  <td data-row="3" data-col="4">0.000986</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-13" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_7jb4kgyfawsvwkplhc7h(i, j, css_id) {
          var table = document.getElementById("tinytable_7jb4kgyfawsvwkplhc7h");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_7jb4kgyfawsvwkplhc7h(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_7jb4kgyfawsvwkplhc7h");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 3 }, { i: '3', j: 2 }, { i: '3', j: 1 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_9r3ojcqx5drnsoontuid',}, 
          { positions: [ { i: '2', j: 0 }, { i: '2', j: 3 }, { i: '2', j: 2 }, { i: '2', j: 1 }, { i: '2', j: 4 },  ], css_id: 'tinytable_css_yt5v5u16i3pg3e04h4nn',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 3 }, { i: '0', j: 2 }, { i: '0', j: 1 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_f08ffxx5hhvh4yuaj8qp',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_7jb4kgyfawsvwkplhc7h(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_9r3ojcqx5drnsoontuid, .table th.tinytable_css_9r3ojcqx5drnsoontuid { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_yt5v5u16i3pg3e04h4nn, .table th.tinytable_css_yt5v5u16i3pg3e04h4nn { color: #00000000; }
      .table td.tinytable_css_f08ffxx5hhvh4yuaj8qp, .table th.tinytable_css_f08ffxx5hhvh4yuaj8qp { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_7jb4kgyfawsvwkplhc7h" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Model</th>
                <th scope="col" data-row="0" data-col="1">estimate</th>
                <th scope="col" data-row="0" data-col="2">conf.low</th>
                <th scope="col" data-row="0" data-col="3">conf.high</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Two-periods (no clustering)</td>
                  <td data-row="1" data-col="1">-0.0225</td>
                  <td data-row="1" data-col="2">-0.2699</td>
                  <td data-row="1" data-col="3">0.225</td>
                  <td data-row="1" data-col="4">0.857941</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Two-periods (clustered)</td>
                  <td data-row="2" data-col="1">-0.0225</td>
                  <td data-row="2" data-col="2">-0.0349</td>
                  <td data-row="2" data-col="3">-0.0101</td>
                  <td data-row="2" data-col="4">0.000986</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Two-way FE</td>
                  <td data-row="3" data-col="1">-0.0225</td>
                  <td data-row="3" data-col="2">-0.0349</td>
                  <td data-row="3" data-col="3">-0.0101</td>
                  <td data-row="3" data-col="4">0.000986</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-14" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_q7vyiflo81fd2x7gaxio(i, j, css_id) {
          var table = document.getElementById("tinytable_q7vyiflo81fd2x7gaxio");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_q7vyiflo81fd2x7gaxio(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_q7vyiflo81fd2x7gaxio");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '3', j: 3 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_tt4v7yyo2xpah5cppfft',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_vm324oz1bdfe4d8jw1c4',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_q7vyiflo81fd2x7gaxio(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_tt4v7yyo2xpah5cppfft, .table th.tinytable_css_tt4v7yyo2xpah5cppfft { color: #00000000; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_vm324oz1bdfe4d8jw1c4, .table th.tinytable_css_vm324oz1bdfe4d8jw1c4 { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_q7vyiflo81fd2x7gaxio" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Model</th>
                <th scope="col" data-row="0" data-col="1">estimate</th>
                <th scope="col" data-row="0" data-col="2">conf.low</th>
                <th scope="col" data-row="0" data-col="3">conf.high</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Two-periods (no clustering)</td>
                  <td data-row="1" data-col="1">-0.0225</td>
                  <td data-row="1" data-col="2">-0.2699</td>
                  <td data-row="1" data-col="3">0.225</td>
                  <td data-row="1" data-col="4">0.857941</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Two-periods (clustered)</td>
                  <td data-row="2" data-col="1">-0.0225</td>
                  <td data-row="2" data-col="2">-0.0349</td>
                  <td data-row="2" data-col="3">-0.0101</td>
                  <td data-row="2" data-col="4">0.000986</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Two-way FE</td>
                  <td data-row="3" data-col="1">-0.0225</td>
                  <td data-row="3" data-col="2">-0.0349</td>
                  <td data-row="3" data-col="3">-0.0101</td>
                  <td data-row="3" data-col="4">0.000986</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</section>
<section id="results-15" class="slide level2">
<h2>Results</h2>
<div class="cell">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_4y446s8fojdmvdo0aj1i(i, j, css_id) {
          var table = document.getElementById("tinytable_4y446s8fojdmvdo0aj1i");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function spanCell_4y446s8fojdmvdo0aj1i(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_4y446s8fojdmvdo0aj1i");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '3', j: 0 }, { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '3', j: 3 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_87k7nndq43b7b93hofml',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_51fs2o50ia756pvp7ozp',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_4y446s8fojdmvdo0aj1i(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_87k7nndq43b7b93hofml, .table th.tinytable_css_87k7nndq43b7b93hofml { border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_51fs2o50ia756pvp7ozp, .table th.tinytable_css_51fs2o50ia756pvp7ozp { border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_4y446s8fojdmvdo0aj1i" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">Model</th>
                <th scope="col" data-row="0" data-col="1">estimate</th>
                <th scope="col" data-row="0" data-col="2">conf.low</th>
                <th scope="col" data-row="0" data-col="3">conf.high</th>
                <th scope="col" data-row="0" data-col="4">p.value</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Two-periods (no clustering)</td>
                  <td data-row="1" data-col="1">-0.0225</td>
                  <td data-row="1" data-col="2">-0.2699</td>
                  <td data-row="1" data-col="3">0.225</td>
                  <td data-row="1" data-col="4">0.857941</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Two-periods (clustered)</td>
                  <td data-row="2" data-col="1">-0.0225</td>
                  <td data-row="2" data-col="2">-0.0349</td>
                  <td data-row="2" data-col="3">-0.0101</td>
                  <td data-row="2" data-col="4">0.000986</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Two-way FE</td>
                  <td data-row="3" data-col="1">-0.0225</td>
                  <td data-row="3" data-col="2">-0.0349</td>
                  <td data-row="3" data-col="3">-0.0101</td>
                  <td data-row="3" data-col="4">0.000986</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
<div class="fragment">
<p>These estimates are only <em>valid</em> under a <strong>BIG assumption</strong></p>
</div>
</section>
<section id="assumption-parallel-trends" class="slide level2">
<h2>Assumption: Parallel trends</h2>

<img data-src="fig/dd_trend_1.png" class="r-stretch"></section>
<section id="what-if-we-break-parallel-trends" class="slide level2">
<h2>What if we break parallel trends?</h2>

<img data-src="fig/dd_trend_2.png" class="r-stretch"></section>
<section id="what-if-we-break-parallel-trends-1" class="slide level2">
<h2>What if we break parallel trends?</h2>

<img data-src="fig/dd_trend_3.png" class="r-stretch"></section>
<section id="challenge-staggered-adoption" class="slide level2">
<h2>Challenge: Staggered adoption</h2>

<img data-src="fig/dd_timing.png" class="r-stretch"></section>
<section id="summary-1" class="slide level2">
<h2>Summary</h2>
<ul>
<li><p>Difference in difference leverages before-after comparisons between treatment and control group to tease out causal effects</p></li>
<li><p><strong>Highly local:</strong> Focus on average treatment effect <em>on the treated</em></p></li>
<li><p>Could always change the control group</p></li>
<li><p>Parallel trends assumption is very important!</p></li>
</ul>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="week7_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="week7_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="week7_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="week7_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="week7_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="week7_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="week7_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="week7_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="week7_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="week7_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="week7_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: false,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>